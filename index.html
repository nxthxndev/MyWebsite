<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Media Extractor (Frontend)</title>
  <style>
    body {
      background: radial-gradient(circle at center, #1a0000, #000);
      color: #ff0000;
      font-family: monospace;
      text-align: center;
    }
    h1 {
      margin-top: 40px;
      text-shadow: 0 0 15px #ff0000;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      border: 2px solid #ff0000;
      background: #000;
      color: #ff0000;
    }
    #results {
      margin-top: 20px;
      text-align: left;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      background: rgba(50, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #ff0000;
    }
    img, video {
      max-width: 100%;
      margin: 10px 0;
      border: 1px solid #ff0000;
    }
    .download-btn {
      display: inline-block;
      margin: 5px;
      padding: 5px 10px;
      background: #ff0000;
      color: #000;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>üï∑Ô∏è Media Extractor (Frontend)</h1>
  <p>Entrez une URL pour extraire toutes les images et vid√©os :</p>
  <input type="text" id="urlInput" placeholder="https://example.com" />
  <button onclick="analyze()">Analyser</button>

  <div id="results"></div>

  <script>
    async function analyze() {
      const url = document.getElementById('urlInput').value;
      const results = document.getElementById('results');
      results.innerHTML = "<p>üîç Analyse en cours...</p>";

      try {
        // Utiliser un proxy CORS
        const proxyUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent(url);
        const response = await fetch(proxyUrl);
        const htmlText = await response.text();

        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlText, 'text/html');

        const images = Array.from(doc.querySelectorAll('img'))
                            .map(img => img.src || img.getAttribute('src'));
        const videos = Array.from(doc.querySelectorAll('video source'))
                            .map(video => video.src || video.getAttribute('src'));

        if (images.length === 0 && videos.length === 0) {
          results.innerHTML = "<p>üòï Aucun m√©dia trouv√©.</p>";
          return;
        }

        let html = "";
        if (images.length) {
          html += "<h2>üñºÔ∏è Images</h2>";
          images.forEach(src => {
            html += `
              <div>
                <img src="${src}" alt="">
                <a href="${src}" download class="download-btn">üì• T√©l√©charger</a>
              </div>`;
          });
        }

        if (videos.length) {
          html += "<h2>üé• Vid√©os</h2>";
          videos.forEach(src => {
            html += `
              <div>
                <video controls>
                  <source src="${src}">
                </video>
                <a href="${src}" download class="download-btn">üì• T√©l√©charger</a>
              </div>`;
          });
        }

        results.innerHTML = html;

      } catch (err) {
        results.innerHTML = `<p style="color:red;">‚ùå Erreur : ${err.message}</p>`;
      }
    }
  </script>
</body>
</html>
